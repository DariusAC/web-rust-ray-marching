<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>My Wasm Project</title>
<style>
* {
	color: #efefef;
	white-space: pre;
	font-family: monospace;
	background-color: #111111;
}
</style>
  </head>

  <body>
    <div id="out"></div>
    <script type="module">
      var output;
      // Importing WASM as a JS module requires us to call an init function provided by the default export.
      // This is planned to be changed in the future.
      import { default as wasm, Body, Vec3f, Instance } from "./pkg/web_rust_ray_marching.js";

      wasm().then((module) => {
        var inst = Instance.new(Vec3f.new(1.0, 0.0, 0.0), Vec3f.new(0.0, 0.0, 1.0), 20, 1.0);
	inst.add_body(Body.new(
	    Vec3f.new(0.0, 0.0, 5.0),
	    Vec3f.new(0.0, 0.0, 0.0),
	    0.3,
	    4500.0));
	inst.add_body(Body.new(
	    Vec3f.new(0.0, 1.3, 5.0),
	    Vec3f.new(0.9115, 0.0, 0.0),
	    0.1,
	    15.0));
	inst.add_body(Body.new(
	    Vec3f.new(0.0, -1.3, 5.0),
	    Vec3f.new(-0.9115, 0.0, 0.0),
	    0.2,
	    30.0));
	out = document.getElementById("out");
	
	var i = setInterval(function() {
	    inst.update();
	    out.innerHTML = inst.screen_out();
	}, 5);

		
        // The boiler plate project comes with a `greet` function that calls:
        // `alert("Hello, hello-wasm!");`
      });
    </script>
  </body>
</html>
